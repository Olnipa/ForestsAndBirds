# Тестовое задание для Unfrozen Studio, вакансия **Gameplay Programmer (Unity, C#)**

##[Ссылка на условие задания] (https://unfrozen.notion.site/Gameplay-Programmer-Unity-C-8ec30a4e89a149dabdf40414a58c6ef3)

Проект выполнен в Unity версии 2022.3.4f1.0.14531

## Задача

- Разработать прототип глобальной карты с точками-сюжетными-миссиями, на которые необходимо отправлять того или иного героя и зарабатывать им очки.
- **Простейший геймплейный цикл:** Карта с миссиями — видишь миссию — выбираешь миссию — читаешь пред-историю миссии — выбираешь героя для прохождения — стартуешь миссию — читаешь содержимое миссии — повторить.
- **Доп. задача:** Прототип должен настраиваться “не программистом”, а путем редактирования спец. файла - указываться количество точек, их расположение и все их содержимое.

## Описание проекта

### Спец. файл
В качестве "спец. файла" для настройки прототипа "не программистом" был выбран файл типа **csv**. В отличие от например скриптабл объекта, **csv** файл позволит в перспективе хранить его онлайн и менять настройки игры когда угодно в том числе в билдах без необходимости загружать новый билд и проходить модерацию при несущественных изменениях настроек.

В качестве разделителя разделов в файле csv выбран символ ";". Есле данные отображаются некорректно - скорее всего в вашем редакторе разделитель разделов не ";" и вам нужно его поменять. Обычно в Excel это Файл => Параметры => Дополнительно => Блок "Параметры правки" => Разделитель разделов.

Можно добавлять новые строки миссий. Пояснения по заполнению каждого столбца указаны в шапке таблицы. Обратите внимание, что пустые ячейки допускаются только в столбцах с Очками за прохождение миссии.
При заполнении файла в ячейках, где нужно указывать ID миссии, важно указывать существующие ID из первого столбца с миссиями. В первом же столбце ID миссий можно указывать любые, но главное чтобы они не повторялись.

### Стартова сцена
Стартовой сценой является единственная сцена SampleScene. На ней же находится точка входа проекта BootStrap.

### Структура проекта
Точкой входа является BootStrap. Он последовательно инициализирует все объекты для того, чтобы в будущем при расширении функционала была возможность самостоятельно указывать последовательность инициализации новых объектов.

Основными элементами игры являются: MissionButtons, Heroes, MissionPanels и FightPanel.

MissionLoader и MissionDataFactory преобразуют данные миссий из csv файла, создавая список MissionData. На основе этого списка и префаба кнопок миссий две фабрики генерирует списки MissionButtonViews и MissionButtonModels. Состояния кнопок миссий задаются при помощи машины состояний MissionStateFactory.

Похожим способом генерируются Hero'es, получая данные о дефолтном списке моделей героев из класса-заглушки HeroesLoader. Далее фабрика на основе этих данных, данных из MissionData и префаба генерирует HeroView's в компоненте ScrollView для возможности прокрутки списка героев если их количество будет увеличено или при игре на узком экране.

Панели миссий MissionPanel и битвы FightPanel созданы на сцене по дефолту. В процессе игры состоянием открытия/закрытия панелей регулирует UIStateMachine. При открытии панелей данные о соответствующей/их миссией/ий передаются из MissionData через события. Аналогично данные через события передаются при старте миссии, в FightPanel и при этом сообтветствующая MissionButton переходит в состояние временно заблокированной. При клике на кнопку "Закончить Миссию" при помощи событий в ряде отдельных компонентов происходит передача опыта Герою/Героям и разблокировка новых миссий в соответствии с данными из MissionButton.